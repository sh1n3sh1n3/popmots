<script lang="ts" setup>
import CopyRight from './CopyRight.vue';

defineProps<{
    isLoading: boolean
}>()
</script>
<template>
    <Transition>
        <div
            v-if="isLoading"
            class="loader"
        >
            <svg
                id="logo"
                class="logo"
                width="250"
                height="250"
                viewBox="0 0 450 450"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <rect
                    width="450"
                    height="450"
                    fill="white"
                />
                <rect
                    class="stroke"
                    x="80"
                    y="80"
                    width="290"
                    height="290"
                    rx="40"
                    fill="white"
                    stroke="#6366F1"
                    stroke-width="10"
                    stroke-dashoffset="0"
                />
                <path
                    class="text"
                    d="M161.588 208.672C159.852 208.672 158.508 208.196 157.556 207.244C156.66 206.236 156.212 204.864 156.212 203.128V154.24C156.212 152.448 156.688 151.104 157.64 150.208C158.592 149.256 159.936 148.78 161.672 148.78H181.916C188.412 148.78 193.424 150.404 196.952 153.652C200.48 156.9 202.244 161.436 202.244 167.26C202.244 173.084 200.48 177.648 196.952 180.952C193.424 184.2 188.412 185.824 181.916 185.824H166.964V203.128C166.964 204.864 166.516 206.236 165.62 207.244C164.724 208.196 163.38 208.672 161.588 208.672ZM166.964 177.34H180.236C184.044 177.34 186.928 176.5 188.888 174.82C190.848 173.084 191.828 170.564 191.828 167.26C191.828 163.956 190.848 161.464 188.888 159.784C186.928 158.104 184.044 157.264 180.236 157.264H166.964V177.34ZM226.682 208.84C222.426 208.84 218.73 207.972 215.594 206.236C212.458 204.5 210.022 202.036 208.286 198.844C206.55 195.596 205.682 191.788 205.682 187.42C205.682 184.116 206.158 181.176 207.11 178.6C208.118 175.968 209.546 173.728 211.394 171.88C213.242 169.976 215.454 168.548 218.03 167.596C220.606 166.588 223.49 166.084 226.682 166.084C230.938 166.084 234.634 166.952 237.77 168.688C240.906 170.424 243.342 172.888 245.078 176.08C246.814 179.272 247.682 183.052 247.682 187.42C247.682 190.724 247.178 193.692 246.17 196.324C245.218 198.956 243.818 201.224 241.97 203.128C240.122 204.976 237.91 206.404 235.334 207.412C232.758 208.364 229.874 208.84 226.682 208.84ZM226.682 200.86C228.754 200.86 230.574 200.356 232.142 199.348C233.71 198.34 234.914 196.856 235.754 194.896C236.65 192.88 237.098 190.388 237.098 187.42C237.098 182.94 236.146 179.608 234.242 177.424C232.338 175.184 229.818 174.064 226.682 174.064C224.61 174.064 222.79 174.568 221.222 175.576C219.654 176.528 218.422 178.012 217.526 180.028C216.686 181.988 216.266 184.452 216.266 187.42C216.266 191.844 217.218 195.204 219.122 197.5C221.026 199.74 223.546 200.86 226.682 200.86ZM261.557 223.792C259.877 223.792 258.589 223.344 257.693 222.448C256.797 221.552 256.349 220.236 256.349 218.5V171.544C256.349 169.808 256.797 168.492 257.693 167.596C258.589 166.7 259.849 166.252 261.473 166.252C263.153 166.252 264.441 166.7 265.337 167.596C266.233 168.492 266.681 169.808 266.681 171.544V178.096L265.757 175.576C266.597 172.72 268.305 170.424 270.881 168.688C273.513 166.952 276.565 166.084 280.037 166.084C283.621 166.084 286.757 166.952 289.445 168.688C292.189 170.424 294.317 172.888 295.829 176.08C297.341 179.216 298.097 182.996 298.097 187.42C298.097 191.788 297.341 195.596 295.829 198.844C294.317 202.036 292.217 204.5 289.529 206.236C286.841 207.972 283.677 208.84 280.037 208.84C276.621 208.84 273.625 208 271.049 206.32C268.473 204.584 266.737 202.344 265.841 199.6H266.849V218.5C266.849 220.236 266.373 221.552 265.421 222.448C264.525 223.344 263.237 223.792 261.557 223.792ZM277.097 200.86C279.169 200.86 280.989 200.356 282.557 199.348C284.125 198.34 285.329 196.856 286.169 194.896C287.065 192.88 287.513 190.388 287.513 187.42C287.513 182.94 286.561 179.608 284.657 177.424C282.753 175.184 280.233 174.064 277.097 174.064C275.025 174.064 273.205 174.568 271.637 175.576C270.069 176.528 268.837 178.012 267.941 180.028C267.101 181.988 266.681 184.452 266.681 187.42C266.681 191.844 267.633 195.204 269.537 197.5C271.441 199.74 273.961 200.86 277.097 200.86ZM139.924 298.672C138.356 298.672 137.152 298.224 136.312 297.328C135.472 296.432 135.052 295.2 135.052 293.632V243.148C135.052 241.524 135.5 240.292 136.396 239.452C137.292 238.556 138.524 238.108 140.092 238.108C141.492 238.108 142.584 238.388 143.368 238.948C144.208 239.452 144.964 240.348 145.636 241.636L166.384 280.024H163.696L184.444 241.636C185.116 240.348 185.844 239.452 186.628 238.948C187.412 238.388 188.504 238.108 189.904 238.108C191.472 238.108 192.676 238.556 193.516 239.452C194.356 240.292 194.776 241.524 194.776 243.148V293.632C194.776 295.2 194.356 296.432 193.516 297.328C192.732 298.224 191.528 298.672 189.904 298.672C188.336 298.672 187.132 298.224 186.292 297.328C185.452 296.432 185.032 295.2 185.032 293.632V254.74H186.88L169.24 286.912C168.68 287.864 168.092 288.564 167.476 289.012C166.86 289.46 166.02 289.684 164.956 289.684C163.892 289.684 163.024 289.46 162.352 289.012C161.68 288.508 161.092 287.808 160.588 286.912L142.78 254.656H144.796V293.632C144.796 295.2 144.376 296.432 143.536 297.328C142.752 298.224 141.548 298.672 139.924 298.672ZM225.534 298.84C221.278 298.84 217.582 297.972 214.446 296.236C211.31 294.5 208.874 292.036 207.138 288.844C205.402 285.596 204.534 281.788 204.534 277.42C204.534 274.116 205.01 271.176 205.962 268.6C206.97 265.968 208.398 263.728 210.246 261.88C212.094 259.976 214.306 258.548 216.882 257.596C219.458 256.588 222.342 256.084 225.534 256.084C229.79 256.084 233.486 256.952 236.622 258.688C239.758 260.424 242.194 262.888 243.93 266.08C245.666 269.272 246.534 273.052 246.534 277.42C246.534 280.724 246.03 283.692 245.022 286.324C244.07 288.956 242.67 291.224 240.822 293.128C238.974 294.976 236.762 296.404 234.186 297.412C231.61 298.364 228.726 298.84 225.534 298.84ZM225.534 290.86C227.606 290.86 229.426 290.356 230.994 289.348C232.562 288.34 233.766 286.856 234.606 284.896C235.502 282.88 235.95 280.388 235.95 277.42C235.95 272.94 234.998 269.608 233.094 267.424C231.19 265.184 228.67 264.064 225.534 264.064C223.462 264.064 221.642 264.568 220.074 265.576C218.506 266.528 217.274 268.012 216.378 270.028C215.538 271.988 215.118 274.452 215.118 277.42C215.118 281.844 216.07 285.204 217.974 287.5C219.878 289.74 222.398 290.86 225.534 290.86ZM273.606 298.84C269.966 298.84 266.914 298.224 264.45 296.992C262.042 295.76 260.25 293.968 259.074 291.616C257.898 289.208 257.31 286.24 257.31 282.712V264.82H252.942C251.598 264.82 250.562 264.484 249.834 263.812C249.106 263.084 248.742 262.104 248.742 260.872C248.742 259.584 249.106 258.604 249.834 257.932C250.562 257.26 251.598 256.924 252.942 256.924H257.31V249.28C257.31 247.544 257.758 246.228 258.654 245.332C259.606 244.436 260.922 243.988 262.602 243.988C264.282 243.988 265.57 244.436 266.466 245.332C267.362 246.228 267.81 247.544 267.81 249.28V256.924H276.714C278.058 256.924 279.094 257.26 279.822 257.932C280.55 258.604 280.914 259.584 280.914 260.872C280.914 262.104 280.55 263.084 279.822 263.812C279.094 264.484 278.058 264.82 276.714 264.82H267.81V282.124C267.81 284.812 268.398 286.828 269.574 288.172C270.75 289.516 272.654 290.188 275.286 290.188C276.238 290.188 277.078 290.104 277.806 289.936C278.534 289.768 279.178 289.656 279.738 289.6C280.41 289.544 280.97 289.768 281.418 290.272C281.866 290.72 282.09 291.672 282.09 293.128C282.09 294.248 281.894 295.256 281.502 296.152C281.166 296.992 280.522 297.58 279.57 297.916C278.842 298.14 277.89 298.336 276.714 298.504C275.538 298.728 274.502 298.84 273.606 298.84ZM302.064 298.84C299.656 298.84 297.108 298.588 294.42 298.084C291.732 297.58 289.324 296.712 287.196 295.48C286.3 294.92 285.656 294.276 285.264 293.548C284.928 292.764 284.788 292.008 284.844 291.28C284.956 290.496 285.236 289.824 285.684 289.264C286.188 288.704 286.804 288.34 287.532 288.172C288.316 288.004 289.156 288.144 290.052 288.592C292.292 289.656 294.392 290.412 296.352 290.86C298.312 291.252 300.244 291.448 302.148 291.448C304.836 291.448 306.824 291 308.112 290.104C309.456 289.152 310.128 287.92 310.128 286.408C310.128 285.12 309.68 284.14 308.784 283.468C307.944 282.74 306.656 282.208 304.92 281.872L296.52 280.276C293.048 279.604 290.388 278.344 288.54 276.496C286.748 274.592 285.852 272.156 285.852 269.188C285.852 266.5 286.58 264.176 288.036 262.216C289.548 260.256 291.62 258.744 294.252 257.68C296.884 256.616 299.908 256.084 303.324 256.084C305.788 256.084 308.084 256.364 310.212 256.924C312.396 257.428 314.496 258.24 316.512 259.36C317.352 259.808 317.912 260.396 318.192 261.124C318.528 261.852 318.612 262.608 318.444 263.392C318.276 264.12 317.94 264.792 317.436 265.408C316.932 265.968 316.288 266.332 315.504 266.5C314.776 266.612 313.936 266.444 312.984 265.996C311.248 265.1 309.568 264.456 307.944 264.064C306.376 263.672 304.864 263.476 303.408 263.476C300.664 263.476 298.62 263.952 297.276 264.904C295.988 265.856 295.344 267.116 295.344 268.684C295.344 269.86 295.736 270.84 296.52 271.624C297.304 272.408 298.508 272.94 300.132 273.22L308.532 274.816C312.172 275.488 314.916 276.72 316.764 278.512C318.668 280.304 319.62 282.712 319.62 285.736C319.62 289.824 318.024 293.044 314.832 295.396C311.64 297.692 307.384 298.84 302.064 298.84Z"
                    fill="#6366F1"
                />
            </svg>
            <CopyRight />
        </div>
    </Transition>
</template>

<style lang="scss">
@use '@/assets/styles/_variables' as *;

.loader {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    align-items: center;
    border-radius: 0;
    color: var(--primary);
    background-color: var(--primary);
    font-size: var(--font-4);
    font-weight: 700;
    user-select: none;
    transform: translate3d(0, 0, 0);
    z-index: 9999;

    &::before {
        content: '';
        position: absolute;
        inset: var(--space-xs) 0;
        margin: 10px;
        background-color: #fff;
        border-radius: 50px;
        border: 5px solid var(--secondary-light);
        animation: borderColor 1s alternate infinite;
        z-index: 10;

        @media screen and (min-width: $screen-s) {
            inset: 0;
        }
    }

    @keyframes backgroundColor {
        0% {
            background-color: var(--secondary-light);
        }

        100% {
            background-color: var(--primary);
        }
    }

    @keyframes borderColor {
        0% {
            border-color: var(--secondary-light);
        }

        100% {
            border-color: var(--primary);
        }
    }
}

.logo {
    width: $min-width;
    height: $min-width;
    z-index: 10;

    .text {
        fill: var(--secondary-light);
        animation: fill 1s alternate infinite;
    }

    .stroke {
        stroke: var(--secondary-light);
        stroke-dasharray: 1200;
        animation: dash 2s linear infinite, colorStroke 1s alternate infinite;
    }

    @keyframes dash {
        0% {
            stroke-dashoffset: 1200;
        }

        100% {
            stroke-dashoffset: -1200;
        }
    }

    @keyframes colorStroke {
        0% {
            stroke: var(--secondary-light);
        }

        100% {
            stroke: var(--primary);
        }
    }

    @keyframes fill {
        0% {
            fill: var(--secondary-light);
        }

        100% {
            fill: var(--primary);
        }
    }
}

.v-enter-active,
.v-leave-active {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    transition:
        transform 0.3s cubic-bezier(0.22, 0.61, 0.36, 1),
        opacity 0.15s 0.15s cubic-bezier(0.22, 0.61, 0.36, 1);
}

.v-enter-from {
    opacity: 0;
    transform: translate3d(0, 200%, 0);
}

.v-leave-to {
    opacity: 0;
    transform: translate3d(0, -100%, 0);
}
</style>